[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[build.buildArgs]
NEXT_PUBLIC_STORAGE_TYPE = "${{NEXT_PUBLIC_STORAGE_TYPE}}"
NEXT_PUBLIC_TURNSTILE_SITE_KEY = "${{NEXT_PUBLIC_TURNSTILE_SITE_KEY}}"
NEXT_PUBLIC_SITE_NAME = "${{NEXT_PUBLIC_SITE_NAME}}"
NEXT_PUBLIC_SEARCH_MAX_PAGE = "${{NEXT_PUBLIC_SEARCH_MAX_PAGE}}"
NEXT_PUBLIC_FLUID_SEARCH = "${{NEXT_PUBLIC_FLUID_SEARCH}}"
NEXT_PUBLIC_DISABLE_YELLOW_FILTER = "${{NEXT_PUBLIC_DISABLE_YELLOW_FILTER}}"
NEXT_PUBLIC_REQUIRE_DEVICE_CODE = "${{NEXT_PUBLIC_REQUIRE_DEVICE_CODE}}"

[deploy]
startCommand = "node production-final.js"
healthcheckPath = "/api/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
