// 此文件由 scripts/convert-changelog.js 自动生成
// 请勿手动编辑

export interface ChangelogEntry {
  version: string;
  date: string;
  added: string[];
  changed: string[];
  fixed: string[];
}

export const changelog: ChangelogEntry[] = [
  {
    version: "1.0.16",
    date: "2025-11-01",
    added: [
    "新增 `/api/proxy/m3u8` 代理 API，处理 m3u8 清单并重写内容",
    "新增 `/api/proxy/segment` 代理 API，处理 ts 视频分片",
    "新增 `/api/proxy/key` 代理 API，处理加密密钥"
    ],
    changed: [
    "移除客户端 HLS 自定义加载器的 URL 拦截逻辑",
    "简化去广告功能，仅在 HLS 加载器中过滤广告段",
    "优化代理 API，使用流式传输减少内存占用",
    "更新视频 URL 处理逻辑，使用 m3u8 代理而非 video 代理",
    "移除 `/api/proxy/video` 代理 API（已被 m3u8/segment 代理替代）",
    "移除客户端复杂的 URL 重写逻辑",
    "**部署后需要清除浏览器缓存和 Service Worker 缓存**",
    "建议使用 Ctrl+Shift+R (Windows) 或 Cmd+Shift+R (Mac) 强制刷新",
    "或在浏览器开发者工具中清除站点数据"
    ],
    fixed: [
    "修复 Docker 容器中视频无法播放的 CORS 问题",
    "采用原始项目 OrangeTV 的代理方案，服务器端重写 m3u8 内容",
    "所有 ts 分片 URL 在服务器端替换为代理 URL",
    "添加 Referer 和 Origin 头以绕过防盗链检测"
    ]
  },
  {
    version: "1.0.15",
    date: "2025-11-01",
    added: [
      // 无新增内容
    ],
    changed: [
    "简化视频代理逻辑，所有外部视频源统一通过代理处理",
    "更新 Nginx 配置，使用正确的域名和端口",
    "更新 manifest.json 图标路径，使用现有的 logo.png"
    ],
    fixed: [
    "修复远程服务器视频无法播放的 CORS 错误",
    "修复 Nginx 配置中的占位符问题",
    "修复视频代理逻辑判断错误，导致视频仍直接访问源站",
    "修复 PWA manifest 图标路径 404 错误"
    ]
  },
  {
    version: "1.0.14",
    date: "2025-11-01",
    added: [
    "选集侧边栏添加底部分页按钮，支持多页切换",
    "视频源列表添加按延迟自动排序功能"
    ],
    changed: [
    "优化视频加载速度：移除1秒加载延迟，优选测速限制为5个源，超时缩短至2.5秒",
    '优化选集显示：统一为"第01集"格式，顶部只显示当前页范围',
    "优化轮播图：修复点击跳转问题，添加z-index防止事件冒泡",
    "优化分页按钮：均匀分配宽度，浅色模式悬停改为主题色",
    "清理冗余代码：移除横向滚动相关的ref和事件监听器"
    ],
    fixed: [
    "修复首页轮播图点击后无法播放问题",
    "修复轮播图切换按钮和指示器被遮挡问题",
    "修复播放页面控制台大量错误问题",
    "修复EpisodeSelector重复测速问题"
    ]
  },
  {
    version: "1.0.13",
    date: "2025-10-31",
    added: [
    '搜索页面添加"聚合搜索"标题和热门搜索标签',
    '搜索框右侧添加"搜索"按钮',
    "添加空搜索提示功能",
    "热门搜索标签从首页热门影视动态获取"
    ],
    changed: [
    "优化搜索页面布局：无内容时居中显示，有内容时回到顶部",
    "优化搜索结果显示：显示结果总数而非源进度",
    "优化搜索逻辑：清空搜索框时清空结果，退格修改时保持结果不变",
    "优化移动端响应式布局和元素大小",
    "优化热门标签样式：白色背景配浅灰边框，悬停时主题色",
    "搜索页面居中状态下禁止页面滚动"
    ],
    fixed: [
    "修复短剧搜索源计数导致进度显示 88/89 的问题",
    "修复搜索历史重复显示问题",
    "修复热门关键词获取失败问题",
    "修复搜索框定位和布局问题",
    "移除未使用的导入和调试代码"
    ]
  },
  {
    version: "1.0.12",
    date: "2025-10-31",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化管理面板视频源配置界面布局和样式",
    "添加视频源搜索功能，支持按名称、KEY、API地址搜索",
    "优化视频源列表为Flex布局，列宽自适应",
    "调整操作按钮布局，均匀分配空间",
    "增加有效性列宽度，优化检测结果显示",
    "加深检测状态容器背景色，提升可读性",
    "移除管理面板外层容器margin，统一padding为40px"
    ],
    fixed: [
    "修复表头和内容列宽不一致问题",
    "修复搜索关键词变量重复定义问题",
    "修复视频源搜索进度计数问题"
    ]
  },
  {
    version: "1.0.11",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    '优化播放页面布局：移除标题">"符号，调整集数标题样式',
    '优化选集按钮：改为矩形3列布局，显示"第01集"格式',
    "优化侧边栏：调整切换按钮位置，改为虚线分割",
    '优化短剧页面：移除"短剧"标签，添加年份徽章',
    "优化用户菜单和管理面板加载性能",
    "优化直播页面按钮悬停效果"
    ],
    fixed: [
    "修复短剧年份显示问题",
    "移除所有调试日志，提升性能",
    "修复 TypeScript 类型错误"
    ]
  },
  {
    version: "1.0.10",
    date: "2025-10-30",
    added: [
    "添加轻量级缓存系统，减少重复 API 请求",
    "添加数据预加载机制，提升首次访问速度",
    "添加防抖和节流 Hooks，优化用户交互",
    "添加懒加载组件，优化初始渲染性能"
    ],
    changed: [
    "应用缓存 API 到首页和 douban 页面",
    "提取设置管理逻辑到独立 Hook",
    "优化 Next.js 配置，禁用 optimizeCss 避免构建错误"
    ],
    fixed: [
    "修复构建失败问题（critters 依赖）"
    ]
  },
  {
    version: "1.0.9",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化直播页面加载动画，统一视频加载样式",
    "优化路由跳转性能，使用 requestAnimationFrame 延迟跳转",
    "优化组件性能，添加 React.memo 避免不必要重渲染",
    "优化 douban 页面，合并 useEffect 减少重复执行",
    "优化 UserMenu 组件，提取设置逻辑到独立 Hook",
    "简化登录页面版本显示，移除版本提示和链接"
    ],
    fixed: [
    "修复页面切换响应延迟问题",
    "清理未使用的工具文件和冗余代码"
    ]
  },
  {
    version: "1.0.8",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化聊天界面样式，调整气泡圆角、间距和颜色",
    "移除聊天气泡和头像阴影效果",
    "优化输入框样式和聚焦状态"
    ],
    fixed: [
    "修复管理页面 HTML 结构错误",
    "移除调试日志输出"
    ]
  },
  {
    version: "1.0.7",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "将所有视口高度单位从 vh 改为 dvh 以适配移动端动态视口"
    ],
    fixed: [
    "修复移动端页面高度未适配浏览器地址栏和控制栏问题",
    "修复移动端弹窗和页面内容显示不完整问题"
    ]
  },
  {
    version: "1.0.6",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化移动端用户菜单弹窗响应式布局，添加左右间距",
    "移动端全面禁用弹窗滚动条显示",
    "统一三个弹窗内所有分割线为虚线样式",
    "移动端头像裁剪改为固定全尺寸裁剪"
    ],
    fixed: [
      // 无修复内容
    ]
  },
  {
    version: "1.0.5",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化选集侧边栏容器和分割线颜色",
    "调整侧边栏圆角为 12px",
    "优化视频源容器悬停效果"
    ],
    fixed: [
    "修复重启服务器后管理面板数据丢失问题",
    "修复滚动条在暗色模式下无法自动隐藏问题"
    ]
  },
  {
    version: "1.0.4",
    date: "2025-10-29",
    added: [
    "添加版本更新自动化脚本"
    ],
    changed: [
    "优化版本信息弹窗界面"
    ],
    fixed: [
    "修复 TypeScript 类型错误"
    ]
  },
  {
    version: "1.0.3",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化服务器优雅关闭处理",
    "改进 Upstash Redis 配置和连接"
    ],
    fixed: [
    "修复服务器关闭时 WebSocket 端口未释放问题",
    "修复环境变量优先级，确保配置正确加载",
    "修复机器码绑定选项显示逻辑"
    ]
  },
  {
    version: "1.0.2",
    date: "2025-10-28",
    added: [
    "添加页面滚动条显示"
    ],
    changed: [
    "优化徽章和按钮样式"
    ],
    fixed: [
    "修复侧边栏状态记忆和布局问题",
    "修复继续观看板块显示逻辑",
    "优化代码质量和性能"
    ]
  },
  {
    version: "1.0.1",
    date: "2025-10-28",
    added: [
      // 无新增内容
    ],
    changed: [
      // 无变更内容
    ],
    fixed: [
    "修复封面悬停时滚动按钮被遮盖的层级问题"
    ]
  },
  {
    version: "1.0.0",
    date: "2025-10-27",
    added: [
    "版本管理系统和变更日志面板"
    ],
    changed: [
    "调整首页封面间距",
    "优化 Docker 构建配置"
    ],
    fixed: [
    "用户菜单交互问题",
    "页面布局和样式优化"
    ]
  }
];

export default changelog;
