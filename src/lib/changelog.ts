// 此文件由 scripts/convert-changelog.js 自动生成
// 请勿手动编辑

export interface ChangelogEntry {
  version: string;
  date: string;
  added: string[];
  changed: string[];
  fixed: string[];
}

export const changelog: ChangelogEntry[] = [
  {
    version: "1.0.30",
    date: "2025-11-05",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化移动端直播页面播放器容器比例为 16:9",
    "调整直播页面外层容器上下 padding 为 24px",
    '优化直播页面侧边栏"频道"和"直播源"空状态布局，内容在容器内垂直居中显示',
    "优化桌面端直播页面布局，内容在页面中垂直居中显示"
    ],
    fixed: [
    "修复视频封面图片加载状态管理问题，提升加载稳定性",
    "优化图片加载超时机制，从10秒增加到15秒",
    "改进图片加载失败重试逻辑，减少重试延迟至1秒",
    "修复图片加载完成后仍显示占位符的问题",
    "优化图片URL处理策略，所有外部图片统一使用服务器代理，解决防盗链和跨域问题"
    ]
  },
  {
    version: "1.0.29",
    date: "2025-11-05",
    added: [
      // 无新增内容
    ],
    changed: [
    "统一短剧页面底部加载图标样式，与其他视频板块保持一致"
    ],
    fixed: [
      // 无修复内容
    ]
  },
  {
    version: "1.0.28",
    date: "2025-11-04",
    added: [
      // 无新增内容
    ],
    changed: [
      // 无变更内容
    ],
    fixed: [
    "修复管理面板配置列表移动端横向滚动时表头和分割线断层问题",
    "优化视频源、自定义分类、直播源配置列表的移动端显示"
    ]
  },
  {
    version: "1.0.27",
    date: "2025-11-04",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化分类检索按钮间距，改善移动端布局"
    ],
    fixed: [
    "修复视频封面图片加载状态管理问题，避免已加载图片变成占位符",
    "修复视频卡片徽章文字居中显示",
    "移除客户端调试代码，优化控制台输出",
    "修复代码规范问题（prefer-const）"
    ]
  },
  {
    version: "1.0.26",
    date: "2025-11-04",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化轮播图停留时间至10秒，降低底部遮罩透明度",
    "优化搜索页面移动端间距和筛选器样式",
    "增大筛选器文字和图标尺寸，改善可读性",
    "优化下拉菜单宽度自适应，支持内容自动换行",
    "优化视频卡片徽章响应式尺寸，移动端适当缩小"
    ],
    fixed: [
      // 无修复内容
    ]
  },
  {
    version: "1.0.25",
    date: "2025-11-04",
    added: [
    "新增 WebSocket 支持，实现实时通信功能",
    "新增分离端口模式启动脚本（production-final.js）",
    "新增运行时 WebSocket URL 配置支持"
    ],
    changed: [
    "优化 WebSocket 客户端连接逻辑，支持自动检测和重连",
    "移除 standalone 输出模式，改用标准构建",
    "更新 Dockerfile 以支持分离端口部署"
    ],
    fixed: [
    "修复 Next.js 构建配置问题",
    "优化开发环境 WebSocket 启动流程"
    ]
  },
  {
    version: "1.0.24",
    date: "2025-11-04",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化移动端导航栏布局：logo和标题移至左侧，搜索按钮移至右侧",
    "调整移动端导航栏logo尺寸为24x24px",
    "侧边栏logo改为仅客户端渲染，避免服务端渲染不匹配"
    ],
    fixed: [
    "修复侧边栏logo的hydration错误",
    "修复侧边栏状态从localStorage读取逻辑"
    ]
  },
  {
    version: "1.0.23",
    date: "2025-11-04",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化主题切换逻辑，禁用next-themes内置过渡效果",
    "优化侧边栏布局，调整按钮尺寸为32x32px",
    "优化侧边栏宽度，收起状态48px，展开状态87px",
    "侧边栏收起状态顶部添加logo显示",
    "优化移动端视频封面长按菜单选项背景色统一",
    "优化移动端首页轮播图指示器点击区域",
    "移除冗余的View Transition API代码"
    ],
    fixed: [
    "修复主题切换时页面元素过渡不同步和闪屏问题",
    "修复侧边栏边框在主题切换时的闪烁效果"
    ]
  },
  {
    version: "1.0.22",
    date: "2025-11-02",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化搜索页面进度指示器为简约风格",
    "优化移动端顶部和底部导航栏添加圆角效果",
    "优化移动端底部导航栏图标和文字间距",
    "优化轮播图指示器移动端尺寸和位置",
    "使用dvh单位替代vh适配移动端动态视口"
    ],
    fixed: [
    "修复真实移动端设备页面高度显示不完整问题"
    ]
  },
  {
    version: "1.0.21",
    date: "2025-11-02",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化管理面板移动端体验，三个列表支持横向滚动",
    "优化WebSocket连接配置，支持多种环境适配",
    "视频代理添加30秒超时控制"
    ],
    fixed: [
    "修复移动端继续观看板块选集徽章尺寸过大问题",
    "修复视频代理超时导致的连接失败"
    ]
  },
  {
    version: "1.0.20",
    date: "2025-11-02",
    added: [
    "添加Cloudflare Workers代理支持解决IP封禁问题",
    "添加环境变量NEXT_PUBLIC_SHORTDRAMA_API_URL支持自定义Worker地址"
    ],
    changed: [
    "使用workers.dev域名避免Cloudflare安全检查",
    "优化短剧API超时时间到15秒",
    "清理调试日志，提升代码质量"
    ],
    fixed: [
    "修复远程服务器短剧页面403错误无法加载数据",
    "修复Cloudflare安全检查导致的Worker访问被拦截",
    "修复短剧API超时和错误处理问题",
    "修复TypeScript类型错误导致的构建失败"
    ]
  },
  {
    version: "1.0.19",
    date: "2025-11-01",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化视频源测速逻辑，使用 result.source 而非 sources[index]"
    ],
    fixed: [
    "修复视频源测速结果保存时的索引映射错误",
    "修复 Bangumi 番剧封面无法加载问题（http 转 https）"
    ]
  },
  {
    version: "1.0.18",
    date: "2025-11-01",
    added: [
      // 无新增内容
    ],
    changed: [
    "播放器初始化直接使用 videoUrl，移除重复的 URL 处理逻辑",
    "恢复与原始项目 OrangeTV-main 完全一致的播放逻辑",
    "优化视频源测速，确保选择可用且速度最快的源",
    "初始加载现在可以正常播放视频",
    "所有代码逻辑与原始项目保持一致，确保稳定性"
    ],
    fixed: [
    "修复初始加载时视频无法播放的问题（需手动切换源才能播放）",
    "修复播放器初始化时重复处理 videoUrl 导致的播放失败",
    "修复视频源优选逻辑，测试所有可用源而非仅前5个",
    "修复测速结果保存时的索引错误"
    ]
  },
  {
    version: "1.0.17",
    date: "2025-11-01",
    added: [
    "新增 `/api/proxy/video` 路由，支持视频文件代理",
    "新增智能代理检查逻辑，根据视频源特征判断是否需要代理"
    ],
    changed: [
    "简化 Next.js 配置，移除可能导致问题的优化选项",
    "优化视频 URL 处理逻辑，只对特定视频源（quark、m3u8 等）使用代理",
    "优化 `processShortDramaUrl` 函数，添加详细的代理检查规则",
    "更新 `updateVideoUrl` 函数，只对短剧视频应用代理处理",
    "重新构建并部署后视频播放功能将恢复正常",
    "普通视频源直接播放，特殊视频源通过代理访问"
    ],
    fixed: [
    "修复远程容器部署后视频无法播放的问题",
    "修复视频代理逻辑错误，避免对所有视频源使用 m3u8 代理",
    "修复视频代理请求头缺失 Referer 和 Origin 导致的 403/404 错误",
    "修复 Next.js 配置过度优化导致的构建和运行时问题"
    ]
  },
  {
    version: "1.0.16",
    date: "2025-11-01",
    added: [
    "新增 `/api/proxy/m3u8` 代理 API，处理 m3u8 清单并重写内容",
    "新增 `/api/proxy/segment` 代理 API，处理 ts 视频分片",
    "新增 `/api/proxy/key` 代理 API，处理加密密钥"
    ],
    changed: [
    "移除客户端 HLS 自定义加载器的 URL 拦截逻辑",
    "简化去广告功能，仅在 HLS 加载器中过滤广告段",
    "优化代理 API，使用流式传输减少内存占用",
    "更新视频 URL 处理逻辑，使用 m3u8 代理而非 video 代理",
    "移除 `/api/proxy/video` 代理 API（已被 m3u8/segment 代理替代）",
    "移除客户端复杂的 URL 重写逻辑",
    "**部署后需要清除浏览器缓存和 Service Worker 缓存**",
    "建议使用 Ctrl+Shift+R (Windows) 或 Cmd+Shift+R (Mac) 强制刷新",
    "或在浏览器开发者工具中清除站点数据"
    ],
    fixed: [
    "修复 Docker 容器中视频无法播放的 CORS 问题",
    "采用原始项目 OrangeTV 的代理方案，服务器端重写 m3u8 内容",
    "所有 ts 分片 URL 在服务器端替换为代理 URL",
    "添加 Referer 和 Origin 头以绕过防盗链检测"
    ]
  },
  {
    version: "1.0.15",
    date: "2025-11-01",
    added: [
      // 无新增内容
    ],
    changed: [
    "简化视频代理逻辑，所有外部视频源统一通过代理处理",
    "更新 Nginx 配置，使用正确的域名和端口",
    "更新 manifest.json 图标路径，使用现有的 logo.png"
    ],
    fixed: [
    "修复远程服务器视频无法播放的 CORS 错误",
    "修复 Nginx 配置中的占位符问题",
    "修复视频代理逻辑判断错误，导致视频仍直接访问源站",
    "修复 PWA manifest 图标路径 404 错误"
    ]
  },
  {
    version: "1.0.14",
    date: "2025-11-01",
    added: [
    "选集侧边栏添加底部分页按钮，支持多页切换",
    "视频源列表添加按延迟自动排序功能"
    ],
    changed: [
    "优化视频加载速度：移除1秒加载延迟，优选测速限制为5个源，超时缩短至2.5秒",
    '优化选集显示：统一为"第01集"格式，顶部只显示当前页范围',
    "优化轮播图：修复点击跳转问题，添加z-index防止事件冒泡",
    "优化分页按钮：均匀分配宽度，浅色模式悬停改为主题色",
    "清理冗余代码：移除横向滚动相关的ref和事件监听器"
    ],
    fixed: [
    "修复首页轮播图点击后无法播放问题",
    "修复轮播图切换按钮和指示器被遮挡问题",
    "修复播放页面控制台大量错误问题",
    "修复EpisodeSelector重复测速问题"
    ]
  },
  {
    version: "1.0.13",
    date: "2025-10-31",
    added: [
    '搜索页面添加"聚合搜索"标题和热门搜索标签',
    '搜索框右侧添加"搜索"按钮',
    "添加空搜索提示功能",
    "热门搜索标签从首页热门影视动态获取"
    ],
    changed: [
    "优化搜索页面布局：无内容时居中显示，有内容时回到顶部",
    "优化搜索结果显示：显示结果总数而非源进度",
    "优化搜索逻辑：清空搜索框时清空结果，退格修改时保持结果不变",
    "优化移动端响应式布局和元素大小",
    "优化热门标签样式：白色背景配浅灰边框，悬停时主题色",
    "搜索页面居中状态下禁止页面滚动"
    ],
    fixed: [
    "修复短剧搜索源计数导致进度显示 88/89 的问题",
    "修复搜索历史重复显示问题",
    "修复热门关键词获取失败问题",
    "修复搜索框定位和布局问题",
    "移除未使用的导入和调试代码"
    ]
  },
  {
    version: "1.0.12",
    date: "2025-10-31",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化管理面板视频源配置界面布局和样式",
    "添加视频源搜索功能，支持按名称、KEY、API地址搜索",
    "优化视频源列表为Flex布局，列宽自适应",
    "调整操作按钮布局，均匀分配空间",
    "增加有效性列宽度，优化检测结果显示",
    "加深检测状态容器背景色，提升可读性",
    "移除管理面板外层容器margin，统一padding为40px"
    ],
    fixed: [
    "修复表头和内容列宽不一致问题",
    "修复搜索关键词变量重复定义问题",
    "修复视频源搜索进度计数问题"
    ]
  },
  {
    version: "1.0.11",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    '优化播放页面布局：移除标题">"符号，调整集数标题样式',
    '优化选集按钮：改为矩形3列布局，显示"第01集"格式',
    "优化侧边栏：调整切换按钮位置，改为虚线分割",
    '优化短剧页面：移除"短剧"标签，添加年份徽章',
    "优化用户菜单和管理面板加载性能",
    "优化直播页面按钮悬停效果"
    ],
    fixed: [
    "修复短剧年份显示问题",
    "移除所有调试日志，提升性能",
    "修复 TypeScript 类型错误"
    ]
  },
  {
    version: "1.0.10",
    date: "2025-10-30",
    added: [
    "添加轻量级缓存系统，减少重复 API 请求",
    "添加数据预加载机制，提升首次访问速度",
    "添加防抖和节流 Hooks，优化用户交互",
    "添加懒加载组件，优化初始渲染性能"
    ],
    changed: [
    "应用缓存 API 到首页和 douban 页面",
    "提取设置管理逻辑到独立 Hook",
    "优化 Next.js 配置，禁用 optimizeCss 避免构建错误"
    ],
    fixed: [
    "修复构建失败问题（critters 依赖）"
    ]
  },
  {
    version: "1.0.9",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化直播页面加载动画，统一视频加载样式",
    "优化路由跳转性能，使用 requestAnimationFrame 延迟跳转",
    "优化组件性能，添加 React.memo 避免不必要重渲染",
    "优化 douban 页面，合并 useEffect 减少重复执行",
    "优化 UserMenu 组件，提取设置逻辑到独立 Hook",
    "简化登录页面版本显示，移除版本提示和链接"
    ],
    fixed: [
    "修复页面切换响应延迟问题",
    "清理未使用的工具文件和冗余代码"
    ]
  },
  {
    version: "1.0.8",
    date: "2025-10-30",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化聊天界面样式，调整气泡圆角、间距和颜色",
    "移除聊天气泡和头像阴影效果",
    "优化输入框样式和聚焦状态"
    ],
    fixed: [
    "修复管理页面 HTML 结构错误",
    "移除调试日志输出"
    ]
  },
  {
    version: "1.0.7",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "将所有视口高度单位从 vh 改为 dvh 以适配移动端动态视口"
    ],
    fixed: [
    "修复移动端页面高度未适配浏览器地址栏和控制栏问题",
    "修复移动端弹窗和页面内容显示不完整问题"
    ]
  },
  {
    version: "1.0.6",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化移动端用户菜单弹窗响应式布局，添加左右间距",
    "移动端全面禁用弹窗滚动条显示",
    "统一三个弹窗内所有分割线为虚线样式",
    "移动端头像裁剪改为固定全尺寸裁剪"
    ],
    fixed: [
      // 无修复内容
    ]
  },
  {
    version: "1.0.5",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化选集侧边栏容器和分割线颜色",
    "调整侧边栏圆角为 12px",
    "优化视频源容器悬停效果"
    ],
    fixed: [
    "修复重启服务器后管理面板数据丢失问题",
    "修复滚动条在暗色模式下无法自动隐藏问题"
    ]
  },
  {
    version: "1.0.4",
    date: "2025-10-29",
    added: [
    "添加版本更新自动化脚本"
    ],
    changed: [
    "优化版本信息弹窗界面"
    ],
    fixed: [
    "修复 TypeScript 类型错误"
    ]
  },
  {
    version: "1.0.3",
    date: "2025-10-29",
    added: [
      // 无新增内容
    ],
    changed: [
    "优化服务器优雅关闭处理",
    "改进 Upstash Redis 配置和连接"
    ],
    fixed: [
    "修复服务器关闭时 WebSocket 端口未释放问题",
    "修复环境变量优先级，确保配置正确加载",
    "修复机器码绑定选项显示逻辑"
    ]
  },
  {
    version: "1.0.2",
    date: "2025-10-28",
    added: [
    "添加页面滚动条显示"
    ],
    changed: [
    "优化徽章和按钮样式"
    ],
    fixed: [
    "修复侧边栏状态记忆和布局问题",
    "修复继续观看板块显示逻辑",
    "优化代码质量和性能"
    ]
  },
  {
    version: "1.0.1",
    date: "2025-10-28",
    added: [
      // 无新增内容
    ],
    changed: [
      // 无变更内容
    ],
    fixed: [
    "修复封面悬停时滚动按钮被遮盖的层级问题"
    ]
  },
  {
    version: "1.0.0",
    date: "2025-10-27",
    added: [
    "版本管理系统和变更日志面板"
    ],
    changed: [
    "调整首页封面间距",
    "优化 Docker 构建配置"
    ],
    fixed: [
    "用户菜单交互问题",
    "页面布局和样式优化"
    ]
  }
];

export default changelog;
